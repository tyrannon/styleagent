<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>StyleAgent</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <!-- Main Header -->
    <header class="header">
      <h1>StyleAgent</h1>
      <div class="header-actions">
        <button class="btn-ai" id="suggestOutfitBtn">ğŸ¤– AI Suggest</button>
        <button class="unified-add-btn" id="unifiedAddBtn">+</button>
      </div>
    </header>

    <!-- Tab Content Areas -->
    <main class="main-content">
      
      <!-- Builder Tab Content -->
      <section class="tab-content builder-page" id="builderPage">
        <div class="page-header">
          <h2>ğŸ¨ Outfit Builder</h2>
          <p>Create and design new outfits</p>
        </div>
        
        <!-- Context & Smart Suggestions -->
        <div class="builder-context">
          <div class="context-controls">
            <div class="occasion-selector">
              <label>Occasion:</label>
              <select id="occasionSelect">
                <option value="casual">Casual</option>
                <option value="work">Work</option>
                <option value="formal">Formal</option>
                <option value="date">Date Night</option>
                <option value="gym">Gym/Active</option>
                <option value="travel">Travel</option>
                <option value="party">Party</option>
                <option value="beach">Beach</option>
              </select>
            </div>
            <div class="weather-selector">
              <label>Weather:</label>
              <select id="weatherSelect">
                <option value="mild">Mild</option>
                <option value="hot">Hot</option>
                <option value="cold">Cold</option>
                <option value="rainy">Rainy</option>
                <option value="windy">Windy</option>
              </select>
            </div>
            <button class="btn-smart" id="getSmartSuggestionsBtn">ğŸ§  Get Smart Suggestions</button>
          </div>
        </div>

        <div class="builder-main">
          <!-- Outfit Canvas -->
          <div class="outfit-canvas-container">
            <div class="outfit-canvas">
              <!-- Primary Clothing -->
              <div class="clothing-section primary-clothing">
                <h3>Essential Items</h3>
                <div class="outfit-slots-row">
                  <div class="outfit-slot outfit-tops" data-category="tops">
                    <div class="slot-header">
                      <span class="slot-icon">ğŸ‘•</span>
                      <span class="slot-label">Tops</span>
                    </div>
                    <div class="slot-content">
                      <div class="slot-placeholder">
                        <p>Select a top</p>
                        <button class="select-btn">Choose</button>
                      </div>
                    </div>
                  </div>
                  
                  <div class="outfit-slot outfit-bottoms" data-category="bottoms">
                    <div class="slot-header">
                      <span class="slot-icon">ğŸ‘–</span>
                      <span class="slot-label">Bottoms</span>
                    </div>
                    <div class="slot-content">
                      <div class="slot-placeholder">
                        <p>Select bottoms</p>
                        <button class="select-btn">Choose</button>
                      </div>
                    </div>
                  </div>
                  
                  <div class="outfit-slot outfit-shoes" data-category="shoes">
                    <div class="slot-header">
                      <span class="slot-icon">ğŸ‘Ÿ</span>
                      <span class="slot-label">Shoes</span>
                    </div>
                    <div class="slot-content">
                      <div class="slot-placeholder">
                        <p>Select shoes</p>
                        <button class="select-btn">Choose</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Secondary Clothing -->
              <div class="clothing-section secondary-clothing">
                <h3>Additional Items</h3>
                <div class="outfit-slots-row">
                  <div class="outfit-slot outfit-outerwear" data-category="outerwear">
                    <div class="slot-header">
                      <span class="slot-icon">ğŸ§¥</span>
                      <span class="slot-label">Outerwear</span>
                    </div>
                    <div class="slot-content">
                      <div class="slot-placeholder">
                        <p>Add jacket/coat</p>
                        <button class="select-btn">Choose</button>
                      </div>
                    </div>
                  </div>
                  
                  <div class="outfit-slot outfit-accessories" data-category="accessories">
                    <div class="slot-header">
                      <span class="slot-icon">ğŸ‘œ</span>
                      <span class="slot-label">Accessories</span>
                    </div>
                    <div class="slot-content">
                      <div class="slot-placeholder">
                        <p>Add accessories</p>
                        <button class="select-btn">Choose</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Special Categories -->
              <div class="clothing-section special-clothing">
                <h3>Special Categories</h3>
                <div class="outfit-slots-row">
                  <div class="outfit-slot outfit-underwear" data-category="underwear">
                    <div class="slot-header">
                      <span class="slot-icon">ğŸ©²</span>
                      <span class="slot-label">Underwear</span>
                    </div>
                    <div class="slot-content">
                      <div class="slot-placeholder">
                        <p>Add undergarments</p>
                        <button class="select-btn">Choose</button>
                      </div>
                    </div>
                  </div>
                  
                  <div class="outfit-slot outfit-sleepwear" data-category="sleepwear">
                    <div class="slot-header">
                      <span class="slot-icon">ğŸŒ™</span>
                      <span class="slot-label">Sleepwear</span>
                    </div>
                    <div class="slot-content">
                      <div class="slot-placeholder">
                        <p>Add sleepwear</p>
                        <button class="select-btn">Choose</button>
                      </div>
                    </div>
                  </div>
                  
                  <div class="outfit-slot outfit-activewear" data-category="activewear">
                    <div class="slot-header">
                      <span class="slot-icon">ğŸƒ</span>
                      <span class="slot-label">Activewear</span>
                    </div>
                    <div class="slot-content">
                      <div class="slot-placeholder">
                        <p>Add activewear</p>
                        <button class="select-btn">Choose</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Smart Suggestions Panel -->
          <div class="smart-suggestions-panel">
            <div class="suggestions-header">
              <h3>ğŸ§  Smart Suggestions</h3>
              <div class="suggestions-tabs">
                <button class="suggestion-tab active" data-tab="based-on-selection">Based on Selection</button>
                <button class="suggestion-tab" data-tab="trending">Trending</button>
                <button class="suggestion-tab" data-tab="weather">Weather</button>
              </div>
            </div>
            
            <div class="suggestions-content">
              <div class="suggestion-category active" id="based-on-selection">
                <p class="suggestions-hint">Select items to see AI-powered suggestions that match!</p>
                <div class="suggestions-grid" id="selectionBasedSuggestions">
                  <!-- AI suggestions will populate here -->
                </div>
              </div>
              
              <div class="suggestion-category" id="trending">
                <p class="suggestions-hint">Popular combinations in your wardrobe</p>
                <div class="suggestions-grid" id="trendingSuggestions">
                  <!-- Trending suggestions will populate here -->
                </div>
              </div>
              
              <div class="suggestion-category" id="weather">
                <p class="suggestions-hint">Perfect for today's weather</p>
                <div class="suggestions-grid" id="weatherSuggestions">
                  <!-- Weather-based suggestions will populate here -->
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Builder Actions -->
        <div class="builder-actions">
          <button class="btn-primary" id="generateOutfitBtn">âœ¨ Generate Complete Outfit</button>
          <button class="btn-secondary" id="saveOutfitBtn">ğŸ’¾ Save Outfit</button>
          <button class="btn-tertiary" id="clearOutfitBtn">ğŸ—‘ï¸ Clear All</button>
          <button class="btn-tertiary" id="randomizeOutfitBtn">ğŸ² Randomize</button>
        </div>
      </section>

      <!-- Wardrobe Tab Content -->
      <section class="tab-content wardrobe-page active" id="wardrobePage">
        <div class="page-header">
          <h2>ğŸ‘— Your Wardrobe</h2>
          <div class="wardrobe-stats">
            <span class="stat-item" id="totalItems">0 items</span>
            <span class="stat-item" id="cleanItems">0 clean</span>
            <span class="stat-item" id="dirtyItems">0 dirty</span>
          </div>
          <div class="wardrobe-actions">
            <button class="btn-batch-generate" id="batchGenerateBtn">
              <span class="btn-icon">ğŸ“¸</span>
              <span class="btn-text">Batch Generate</span>
            </button>
          </div>
        </div>
        
        <!-- Enhanced Filters Bar -->
        <div class="filters-bar">
          <!-- Sorting Options -->
          <div class="filter-group sort-group">
            <label class="filter-label">Sort by:</label>
            <select id="sortFilter">
              <option value="newest">ğŸ†• Newest First</option>
              <option value="oldest">â° Oldest First</option>
              <option value="name">ğŸ”¤ Name A-Z</option>
              <option value="name-desc">ğŸ”¤ Name Z-A</option>
              <option value="most-worn">ğŸ‘• Most Worn</option>
              <option value="least-worn">ğŸ†• Least Worn</option>
              <option value="favorites">â­ Favorites First</option>
              <option value="recent-worn">ğŸ“… Recently Worn</option>
            </select>
          </div>
          
          <!-- Category Filter -->
          <div class="filter-group">
            <label class="filter-label">Category:</label>
            <select id="categoryFilter">
              <option value="">All Categories</option>
              <option value="tops">ğŸ‘• Tops</option>
              <option value="bottoms">ğŸ‘– Bottoms</option>
              <option value="shoes">ğŸ‘Ÿ Shoes</option>
              <option value="accessories">ğŸ‘œ Accessories</option>
              <option value="outerwear">ğŸ§¥ Outerwear</option>
              <option value="underwear">ğŸ©² Underwear</option>
              <option value="sleepwear">ğŸŒ™ Sleepwear</option>
              <option value="activewear">ğŸƒ Activewear</option>
            </select>
          </div>
          
          <!-- Laundry Status Filter -->
          <div class="filter-group">
            <label class="filter-label">Status:</label>
            <select id="laundryFilter">
              <option value="">All Status</option>
              <option value="clean">ğŸ§½ Clean</option>
              <option value="dirty">ğŸ§º Dirty</option>
              <option value="washing">ğŸŒ€ Washing</option>
            </select>
          </div>
          
          <!-- Search Box -->
          <div class="filter-group search-group">
            <input type="text" id="searchFilter" placeholder="ğŸ” Search items..." class="search-input">
            <button class="clear-search-btn" id="clearSearchBtn" title="Clear search">âœ•</button>
          </div>
          
          <!-- View Toggle -->
          <div class="view-toggle">
            <button class="view-btn active" data-view="grid" title="Grid View">âŠ</button>
            <button class="view-btn" data-view="list" title="List View">â˜°</button>
            <button class="view-btn" data-view="gallery" title="Gallery View">âŸ¡</button>
          </div>
        </div>

        <!-- Clothing Grid -->
        <div class="clothing-grid" id="clothingGrid">
          <!-- Items will be populated here -->
        </div>
        <div class="gallery-hint" id="galleryHint"></div>
      </section>

      <!-- Outfits Tab Content -->
      <section class="tab-content outfits-page" id="outfitsPage">
        <div class="page-header">
          <h2>ğŸ’« Your Outfits</h2>
          <p>Saved outfits and favorites</p>
        </div>
        
        <!-- Loved Outfits Section -->
        <div class="loved-outfits-section">
          <h3>â¤ï¸ Loved Outfits</h3>
          <div class="loved-outfits-scroll" id="lovedOutfits">
            <!-- Horizontal scrolling loved outfits -->
          </div>
        </div>

        <!-- All Outfits Grid -->
        <div class="all-outfits-section">
          <h3>ğŸ“¸ All Outfits</h3>
          <div class="outfits-grid" id="outfitsGrid">
            <!-- Outfits grid -->
          </div>
        </div>
      </section>

      <!-- Profile Tab Content -->
      <section class="tab-content profile-page" id="profilePage">
        <div class="page-header">
          <h2>ğŸ‘¤ Profile & Analytics</h2>
          <p>Your style insights and preferences</p>
        </div>
        
        <div class="profile-content">
          <div class="analytics-cards">
            <div class="analytics-card">
              <h4>ğŸ“Š Wardrobe Analytics</h4>
              <div class="analytics-stats">
                <div class="stat">
                  <span class="stat-number" id="totalWears">0</span>
                  <span class="stat-label">Total Wears</span>
                </div>
                <div class="stat">
                  <span class="stat-number" id="favoriteItems">0</span>
                  <span class="stat-label">Favorites</span>
                </div>
                <div class="stat">
                  <span class="stat-number" id="outfitCount">0</span>
                  <span class="stat-label">Outfits</span>
                </div>
              </div>
            </div>
            
            <div class="analytics-card">
              <h4>ğŸ¨ Style Insights</h4>
              <div class="color-palette" id="topColors">
                <!-- Top colors will be displayed here -->
              </div>
              <div class="style-tags" id="styleTags">
                <!-- Style preferences -->
              </div>
            </div>
          </div>

          <div class="settings-section">
            <h4>âš™ï¸ Settings</h4>
            <div class="setting-item">
              <label>AI Model</label>
              <select id="aiModelSelect">
                <option value="tinyllama">ğŸ¦™ TinyLlama (Local)</option>
                <option value="openai">ğŸ§  OpenAI GPT-4</option>
              </select>
            </div>
            <div class="setting-item">
              <label>Weather Location</label>
              <input type="text" id="weatherLocation" placeholder="Enter city name">
            </div>
          </div>

          <!-- Style DNA Section -->
          <div class="style-dna-section">
            <h4>ğŸ§¬ Style DNA</h4>
            <p class="style-dna-description">Upload your photo to create personalized outfit visualizations that show YOU wearing your clothes!</p>
            
            <div class="style-dna-content" id="styleDNAContent">
              <!-- Content will be dynamically loaded -->
            </div>
          </div>
        </div>
      </section>

    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <button class="nav-item" data-tab="builder">
        <span class="nav-icon">ğŸ¨</span>
        <span class="nav-label">Builder</span>
      </button>
      <button class="nav-item active" data-tab="wardrobe">
        <span class="nav-icon">ğŸ‘—</span>
        <span class="nav-label">Wardrobe</span>
      </button>
      <button class="nav-item" data-tab="outfits">
        <span class="nav-icon">ğŸ’«</span>
        <span class="nav-label">Outfits</span>
      </button>
      <button class="nav-item" data-tab="profile">
        <span class="nav-icon">ğŸ‘¤</span>
        <span class="nav-label">Profile</span>
      </button>
    </nav>

    <!-- Modals -->
    
    <!-- AI Chat Modal -->
    <div class="modal ai-chat-modal" id="aiChatModal" style="display: none;">
      <div class="modal-backdrop" id="aiChatBackdrop"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3>ğŸ¤– Style Agent</h3>
          <button class="close-btn" id="closeAiChatBtn">Ã—</button>
        </div>
        <div class="modal-body">
          <div class="conversation" id="conversation">
            <div class="message agent-message">
              <p>Hi! I'm your AI style agent. Ask me anything about your wardrobe or what to wear today! âœ¨</p>
            </div>
          </div>
          <div class="input-area">
            <input type="text" id="agentInput" placeholder="Ask me about your style...">
            <button id="sendBtn">Send</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Item Detail Modal -->
    <div class="modal item-detail-modal" id="itemDetailModal" style="display: none;">
      <div class="modal-backdrop" id="itemDetailBackdrop"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="itemDetailTitle">Item Details</h3>
          <button class="close-btn" id="closeItemDetailBtn">Ã—</button>
        </div>
        <div class="modal-body" id="itemDetailBody">
          <!-- Item details will be populated here -->
        </div>
      </div>
    </div>

    <!-- Unified Add Modal -->
    <div class="modal unified-add-modal" id="unifiedAddModal" style="display: none;">
      <div class="modal-backdrop" id="unifiedAddBackdrop"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3>âœ¨ Add to Your Wardrobe</h3>
          <button class="close-btn" id="closeUnifiedAddBtn">Ã—</button>
        </div>
        <div class="modal-body">
          <div class="add-methods-grid">
            <div class="add-method-card" id="photoAnalysisMethod">
              <div class="method-icon">ğŸ¤–</div>
              <div class="method-content">
                <h4>AI Photo Analysis</h4>
                <p>Upload photos and let AI automatically detect details</p>
                <div class="method-status" id="visionStatus">Checking AI...</div>
              </div>
            </div>
            
            <div class="add-method-card" id="manualEntryMethod">
              <div class="method-icon">âœï¸</div>
              <div class="method-content">
                <h4>Manual Entry</h4>
                <p>Add items by typing details manually</p>
                <div class="method-status available">âœ… Always Available</div>
              </div>
            </div>
            
            <div class="add-method-card" id="textOnlyMethod">
              <div class="method-icon">ğŸ“</div>
              <div class="method-content">
                <h4>Text-Only Entry</h4>
                <p>Quick add by describing your item</p>
                <div class="method-status available">âš¡ Quick & Easy</div>
              </div>
            </div>
            
            <div class="add-method-card" id="styleDNAMethod">
              <div class="method-icon">ğŸ§¬</div>
              <div class="method-content">
                <h4>Style DNA Photo</h4>
                <p>Upload your photo for personalized outfits</p>
                <div class="method-status special">âœ¨ For You</div>
              </div>
            </div>
            
            <div class="add-method-card" id="professionalCameraMethod">
              <div class="method-icon">ğŸ“¸</div>
              <div class="method-content">
                <h4>Professional Camera</h4>
                <p>Take photos with pro grid lines and controls</p>
                <div class="method-status pro">ğŸ¯ Pro Mode</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Professional Camera Modal -->
    <div class="modal camera-modal" id="professionalCameraModal" style="display: none;">
      <div class="camera-backdrop"></div>
      <div class="camera-interface">
        <!-- Camera Header -->
        <div class="camera-header">
          <button class="camera-close-btn" id="closeCameraBtn">Ã—</button>
          <div class="camera-title">ğŸ“¸ Professional Camera</div>
          <div class="camera-source-selector">
            <select id="cameraSourceSelect">
              <option value="user">ğŸ“± Front Camera</option>
              <option value="environment">ğŸ“· Back Camera</option>
              <option value="continuity">ğŸ“² iPhone/iPad</option>
            </select>
          </div>
          <button class="camera-settings-btn" id="cameraSettingsBtn">âš™ï¸</button>
        </div>

        <!-- Camera View -->
        <div class="camera-viewport">
          <video id="cameraVideo" autoplay playsinline></video>
          <canvas id="cameraCanvas" style="display: none;"></canvas>
          
          <!-- Grid Lines Overlay -->
          <div class="camera-grid" id="cameraGrid">
            <div class="grid-line grid-vertical grid-left"></div>
            <div class="grid-line grid-vertical grid-right"></div>
            <div class="grid-line grid-horizontal grid-top"></div>
            <div class="grid-line grid-horizontal grid-bottom"></div>
          </div>
          
          <!-- Focus Point -->
          <div class="focus-point" id="focusPoint"></div>
          
          <!-- Camera Overlay Info -->
          <div class="camera-overlay">
            <div class="camera-info">
              <div class="exposure-indicator" id="exposureIndicator">EV: 0</div>
              <div class="flash-indicator" id="flashIndicator">ğŸ”†</div>
            </div>
          </div>
        </div>

        <!-- Camera Controls -->
        <div class="camera-controls">
          <!-- Mode Selector -->
          <div class="camera-modes">
            <button class="mode-btn active" data-mode="auto">AUTO</button>
            <button class="mode-btn" data-mode="portrait">PORTRAIT</button>
            <button class="mode-btn" data-mode="flat-lay">FLAT LAY</button>
            <button class="mode-btn" data-mode="detail">DETAIL</button>
          </div>

          <!-- Main Controls -->
          <div class="camera-main-controls">
            <button class="control-btn" id="galleryBtn">
              <span class="control-icon">ğŸ–¼ï¸</span>
              <span class="control-label">Gallery</span>
            </button>
            
            <button class="shutter-btn" id="shutterBtn">
              <div class="shutter-outer">
                <div class="shutter-inner"></div>
              </div>
            </button>
            
            <button class="control-btn" id="flipCameraBtn">
              <span class="control-icon">ğŸ”„</span>
              <span class="control-label">Flip</span>
            </button>
          </div>

          <!-- Advanced Controls -->
          <div class="camera-advanced-controls" id="advancedControls">
            <div class="control-group">
              <label>Exposure</label>
              <input type="range" id="exposureSlider" min="-2" max="2" step="0.1" value="0">
            </div>
            <div class="control-group">
              <label>Grid</label>
              <button class="toggle-btn active" id="gridToggle">ON</button>
            </div>
            <div class="control-group">
              <label>Timer</label>
              <select id="timerSelect">
                <option value="0">Off</option>
                <option value="3">3s</option>
                <option value="10">10s</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Capture Preview -->
        <div class="capture-preview" id="capturePreview" style="display: none;">
          <img id="capturedImage" alt="Captured photo">
          <div class="preview-controls">
            <button class="preview-btn secondary" id="retakeBtn">â†» Retake</button>
            <button class="preview-btn primary" id="usePhotoBtn">âœ“ Use Photo</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Manual Item Entry Modal -->
    <div class="modal manual-entry-modal" id="manualEntryModal" style="display: none;">
      <div class="modal-backdrop" id="manualEntryBackdrop"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3>ğŸ“ Manual Item Entry</h3>
          <button class="close-btn" id="closeManualEntryBtn">Ã—</button>
        </div>
        <div class="modal-body">
          <div class="manual-entry-form">
            <div class="photo-preview-section">
              <div class="photo-preview" id="manualPhotoPreview">
                <img id="manualPreviewImage" alt="Captured photo">
              </div>
              <p class="photo-note">Your photo has been saved. Please fill in the details below:</p>
            </div>
            
            <form id="manualItemForm">
              <div class="form-group">
                <label for="manualItemName">Item Name *</label>
                <input type="text" id="manualItemName" placeholder="e.g., Blue Cotton T-Shirt" required>
              </div>
              
              <div class="form-group">
                <label for="manualItemCategory">Category *</label>
                <select id="manualItemCategory" required>
                  <option value="">Select category...</option>
                  <option value="tops">ğŸ‘• Tops</option>
                  <option value="bottoms">ğŸ‘– Bottoms</option>
                  <option value="shoes">ğŸ‘Ÿ Shoes</option>
                  <option value="accessories">ğŸ‘œ Accessories</option>
                  <option value="outerwear">ğŸ§¥ Outerwear</option>
                  <option value="underwear">ğŸ©² Underwear</option>
                  <option value="sleepwear">ğŸŒ™ Sleepwear</option>
                  <option value="activewear">ğŸƒ Activewear</option>
                </select>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="manualItemColor">Primary Color</label>
                  <input type="text" id="manualItemColor" placeholder="e.g., Blue, Red, Black">
                </div>
                <div class="form-group">
                  <label for="manualItemMaterial">Material</label>
                  <input type="text" id="manualItemMaterial" placeholder="e.g., Cotton, Denim, Wool">
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="manualItemCondition">Condition</label>
                  <select id="manualItemCondition">
                    <option value="excellent">Excellent</option>
                    <option value="good" selected>Good</option>
                    <option value="fair">Fair</option>
                    <option value="poor">Poor</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="manualItemSeason">Season</label>
                  <select id="manualItemSeason">
                    <option value="all-season" selected>All Season</option>
                    <option value="spring">Spring</option>
                    <option value="summer">Summer</option>
                    <option value="fall">Fall</option>
                    <option value="winter">Winter</option>
                  </select>
                </div>
              </div>
              
              <div class="form-group">
                <label for="manualItemNotes">Notes (Optional)</label>
                <textarea id="manualItemNotes" placeholder="Additional details about this item..." rows="3"></textarea>
              </div>
              
              <div class="form-actions">
                <button type="button" class="btn-secondary" id="cancelManualEntryBtn">Cancel</button>
                <button type="submit" class="btn-primary">âœ… Add to Wardrobe</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Batch Generation Modal -->
    <div class="modal batch-generation-modal" id="batchGenerationModal" style="display: none;">
      <div class="modal-backdrop" id="batchGenerationBackdrop"></div>
      <div class="modal-content batch-modal-content">
        <div class="modal-header">
          <h3>ğŸ“¸ Batch Generate Images</h3>
          <button class="close-btn" id="closeBatchGenerationBtn">Ã—</button>
        </div>
        <div class="modal-body">
          
          <!-- Setup Phase -->
          <div class="batch-setup-phase" id="batchSetupPhase">
            <div class="batch-intro">
              <p>Generate high-quality images for multiple wardrobe items at once. Select your preferences below:</p>
            </div>
            
            <div class="batch-controls">
              <div class="control-group">
                <label class="control-label">Quality Level</label>
                <div class="quality-options">
                  <div class="quality-option" data-quality="preview">
                    <input type="radio" name="quality" value="preview" id="qualityPreview">
                    <label for="qualityPreview">
                      <span class="quality-icon">âš¡</span>
                      <span class="quality-title">Preview</span>
                      <span class="quality-desc">Fast, lower quality</span>
                    </label>
                  </div>
                  <div class="quality-option" data-quality="standard">
                    <input type="radio" name="quality" value="standard" id="qualityStandard" checked>
                    <label for="qualityStandard">
                      <span class="quality-icon">ğŸ¯</span>
                      <span class="quality-title">Standard</span>
                      <span class="quality-desc">Good balance</span>
                    </label>
                  </div>
                  <div class="quality-option" data-quality="high">
                    <input type="radio" name="quality" value="high" id="qualityHigh">
                    <label for="qualityHigh">
                      <span class="quality-icon">âœ¨</span>
                      <span class="quality-title">High Quality</span>
                      <span class="quality-desc">Best results, slower</span>
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="control-group">
                <label class="control-label">Quantity</label>
                <div class="quantity-options">
                  <div class="quantity-option" data-quantity="5">
                    <input type="radio" name="quantity" value="5" id="quantity5" checked>
                    <label for="quantity5">5 items</label>
                  </div>
                  <div class="quantity-option" data-quantity="10">
                    <input type="radio" name="quantity" value="10" id="quantity10">
                    <label for="quantity10">10 items</label>
                  </div>
                  <div class="quantity-option" data-quantity="all">
                    <input type="radio" name="quantity" value="all" id="quantityAll">
                    <label for="quantityAll">All items</label>
                  </div>
                </div>
              </div>
              
              <div class="control-group">
                <label class="control-label">Filter by Category</label>
                <select id="batchCategoryFilter">
                  <option value="">All Categories</option>
                  <option value="tops">ğŸ‘• Tops</option>
                  <option value="bottoms">ğŸ‘– Bottoms</option>
                  <option value="shoes">ğŸ‘Ÿ Shoes</option>
                  <option value="accessories">ğŸ‘œ Accessories</option>
                  <option value="outerwear">ğŸ§¥ Outerwear</option>
                  <option value="underwear">ğŸ©² Underwear</option>
                  <option value="sleepwear">ğŸŒ™ Sleepwear</option>
                  <option value="activewear">ğŸƒ Activewear</option>
                </select>
              </div>
              
              <div class="batch-summary">
                <div class="summary-item">
                  <span class="summary-label">Items to process:</span>
                  <span class="summary-value" id="itemsToProcess">5</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">Estimated time:</span>
                  <span class="summary-value" id="estimatedTime">2-3 minutes</span>
                </div>
              </div>
            </div>
            
            <div class="batch-actions">
              <button class="btn-secondary" id="cancelBatchBtn">Cancel</button>
              <button class="btn-primary" id="startBatchBtn">ğŸš€ Start Generation</button>
            </div>
          </div>
          
          <!-- Progress Phase -->
          <div class="batch-progress-phase" id="batchProgressPhase" style="display: none;">
            <div class="progress-header">
              <h4>Generating Images...</h4>
              <div class="progress-stats">
                <span id="progressCurrent">0</span> of <span id="progressTotal">5</span> complete
              </div>
            </div>
            
            <!-- Pipeline Loading Progress -->
            <div class="pipeline-progress-section" id="pipelineProgressSection">
              <div class="progress-subsection">
                <div class="progress-subsection-header">
                  <span class="progress-icon">ğŸ”§</span>
                  <span class="progress-title">Loading Pipeline Components</span>
                  <span class="progress-status" id="pipelineStatus">Initializing...</span>
                </div>
                <div class="progress-bar-container">
                  <div class="progress-bar pipeline-bar">
                    <div class="progress-fill" id="pipelineFill"></div>
                  </div>
                  <div class="progress-percentage" id="pipelinePercentage">0%</div>
                </div>
                <div class="progress-details-mini">
                  <span id="pipelineCurrentComponent">Loading components...</span>
                  <span class="progress-separator">â€¢</span>
                  <span id="pipelineComponentCount">0/7</span>
                </div>
              </div>
            </div>
            
            <!-- Generation Progress -->
            <div class="generation-progress-section" id="generationProgressSection">
              <div class="progress-subsection">
                <div class="progress-subsection-header">
                  <span class="progress-icon">ğŸ¨</span>
                  <span class="progress-title">Generation Progress</span>
                  <span class="progress-status" id="generationStatus">Waiting...</span>
                </div>
                <div class="progress-bar-container">
                  <div class="progress-bar generation-bar">
                    <div class="progress-fill" id="generationFill"></div>
                  </div>
                  <div class="progress-percentage" id="generationPercentage">0%</div>
                </div>
                <div class="progress-details-mini">
                  <span id="generationCurrentStep">Ready to generate...</span>
                  <span class="progress-separator">â€¢</span>
                  <span id="generationStepCount">0/25</span>
                  <span class="progress-separator">â€¢</span>
                  <span id="generationSpeed">0.0s/step</span>
                </div>
              </div>
            </div>
            
            <!-- Overall Batch Progress -->
            <div class="batch-progress-section" id="batchProgressSection">
              <div class="progress-subsection">
                <div class="progress-subsection-header">
                  <span class="progress-icon">ğŸ“Š</span>
                  <span class="progress-title">Overall Batch Progress</span>
                  <span class="progress-status" id="batchStatus">Starting...</span>
                </div>
                <div class="progress-bar-container">
                  <div class="progress-bar batch-bar">
                    <div class="progress-fill" id="batchFill"></div>
                  </div>
                  <div class="progress-percentage" id="batchPercentage">0%</div>
                </div>
                <div class="progress-details-mini">
                  <span id="batchJobsCompleted">0 jobs completed</span>
                  <span class="progress-separator">â€¢</span>
                  <span id="batchJobsTotal">0 total jobs</span>
                </div>
              </div>
            </div>
            
            <!-- Current Item Processing -->
            <div class="current-processing-section">
              <div class="current-item-card">
                <div class="current-item-header">
                  <span class="processing-icon">âš¡</span>
                  <span class="processing-title">Currently Processing</span>
                  <span class="processing-job-id" id="currentJobId">Job: waiting...</span>
                </div>
                <div class="current-item-details">
                  <div class="current-item-info">
                    <div class="item-name" id="currentItemName">Waiting for first item...</div>
                    <div class="item-details" id="currentItemDetails">Ready to start processing</div>
                  </div>
                  <div class="current-item-timing">
                    <div class="timing-item">
                      <span class="timing-label">Job Started:</span>
                      <span class="timing-value" id="currentJobStartTime">--:--:--</span>
                    </div>
                    <div class="timing-item">
                      <span class="timing-label">Elapsed:</span>
                      <span class="timing-value" id="currentJobElapsed">0s</span>
                    </div>
                    <div class="timing-item">
                      <span class="timing-label">ETA:</span>
                      <span class="timing-value" id="currentJobETA">--:--</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Completed Items Section -->
            <div class="completed-items-section">
              <div class="completed-items-header">
                <span class="completed-icon">âœ…</span>
                <span class="completed-title">Completed Items</span>
                <span class="completed-count" id="completedCount">0 items</span>
              </div>
              <div class="completed-items-grid" id="completedItemsGrid">
                <!-- Completed items with thumbnails will be populated here -->
              </div>
            </div>
            
            <!-- Processing Time and Statistics -->
            <div class="processing-stats-section">
              <div class="stats-grid">
                <div class="stat-card">
                  <div class="stat-icon">â±ï¸</div>
                  <div class="stat-content">
                    <div class="stat-value" id="totalProcessingTime">0s</div>
                    <div class="stat-label">Total Time</div>
                  </div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon">âš¡</div>
                  <div class="stat-content">
                    <div class="stat-value" id="averageProcessingTime">0s</div>
                    <div class="stat-label">Avg per Item</div>
                  </div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon">ğŸ¯</div>
                  <div class="stat-content">
                    <div class="stat-value" id="overallETA">--:--</div>
                    <div class="stat-label">Overall ETA</div>
                  </div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon">ğŸ”„</div>
                  <div class="stat-content">
                    <div class="stat-value" id="processingSpeed">0.0 items/min</div>
                    <div class="stat-label">Processing Speed</div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="progress-controls">
              <button class="btn-secondary" id="pauseBatchBtn">â¸ï¸ Pause</button>
              <button class="btn-secondary" id="resumeBatchBtn" style="display: none;">â–¶ï¸ Resume</button>
              <button class="btn-danger" id="cancelBatchProgressBtn">ğŸ›‘ Cancel</button>
            </div>
          </div>
          
          <!-- Results Phase -->
          <div class="batch-results-phase" id="batchResultsPhase" style="display: none;">
            <div class="results-header">
              <h4>âœ… Generation Complete!</h4>
              <div class="results-summary">
                <div class="result-stat">
                  <span class="stat-number" id="successCount">5</span>
                  <span class="stat-label">Successful</span>
                </div>
                <div class="result-stat">
                  <span class="stat-number" id="errorCount">0</span>
                  <span class="stat-label">Errors</span>
                </div>
                <div class="result-stat">
                  <span class="stat-number" id="totalTime">2m 15s</span>
                  <span class="stat-label">Total Time</span>
                </div>
              </div>
            </div>
            
            <div class="results-grid" id="resultsGrid">
              <!-- Results thumbnails will be populated here -->
            </div>
            
            <div class="results-actions">
              <button class="btn-secondary" id="generateMoreBtn">ğŸ”„ Generate More</button>
              <button class="btn-primary" id="closeBatchResultsBtn">âœ¨ Done</button>
            </div>
          </div>
          
        </div>
      </div>
    </div>

  </div>

  <script src="app.js"></script>
  <script src="../test_batch_generation.js"></script>
</body>
</html>